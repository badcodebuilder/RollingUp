# OpenFlow Switch Specification Version 1.0.0

[链接](https://opennetworking.org/wp-content/uploads/2013/04/openflow-spec-v1.0.0.pdf)

OpenFlow是SDN的一个非常著名的协议。目前OpenFlow协议已经更新到1.5版本，内容也是越来越复杂，所以呢这里从基础开始，首先阅读1.0版本的协议。协议标准不长，全部只有44页，不算附录只有17页。不过里面只提到了标准，并没有讲具体怎么实现（也许这就是标准的特点吧），所以实现只要把标准里面标了*Required*的内容实现就好了。下面来看看这个标准。

## 第一章

没什么内容，大致是说1.0是第一个正式版本，前面版本都是“草稿”，不要用那些标准去实现交换机。

## 第二章

介绍OpenFlow交换机（Switch）的组成，由一个流表和一个安全通道组成。其中，安全通道用于交换机与控制器的通信；流表由流表项组成，当报文与某个流表项匹配时，就执行流表项的操作，否则通过安全通道向控制器发送报文，由控制器决定如何处理。

## 第三章

介绍流表的组成，流表由流表项组成，流表项由头部、计数器、操作组成。头部是一些报文的特征，包括但不限于源/目的MAC地址，源/目的IP地址，源/目的端口号等；计数器用于记录报文被匹配后需要记录的数值，对于不同的表、流、端口、队列都有很多参数需要修改，可以参考文中的表4；操作用于指定该项目被匹配后需要做的事情，可以做0次或者很多次操作。

接着就是介绍一个报文的处理过程，以及其匹配的过程。其匹配过程会根据以太层的协议类型分开处理。

## 第四章

主要就是介绍控制器与交换机之间的通信协议了。控制器通过安全通道向交换机发送指令，接收反馈。其通信报文主要分为三类：控制器到交换机消息，异步消息，同步消息。其中控制器到交换机消息主要是控制器发送的一些指令，例如查询交换机状态，修改流表等操作。异步消息主要是交换机向控制器发送消息，例如非常重要的`PacketIn`消息，错误报告等。同步消息主要包括一些建立通道时候的打招呼消息等（`Vendor`消息还没看懂是干啥）。然后就是简述这些消息的用法。

里面提到了很多802.1D消息，都有特殊处理，难道说报文有所不同吗？

## 附录A

报文结构，没啥好看的，具体实现的时候才会用到，比如说各种枚举值的具体值，数据结构等。

很好，下面就是想想怎么实现这个协议了。此外在粗略地看标准的时候有一些小的想法和问题

1. 这个协议有形式化证明吗（感觉工作量巨大）
2. 其中在建立安全通道的时候理论上应该用的是TLS，有没有可能会涉及到群组密钥的生成算法呢？
